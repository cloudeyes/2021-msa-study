<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="332px" preserveAspectRatio="none" style="width:426px;height:332px;" version="1.1" viewBox="0 0 426 332" width="426px" zoomAndPan="magnify"><defs><filter height="300%" id="f112pgbq1pzgnw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster ServiceLayer--><polygon fill="#FFFFFF" filter="url(#f112pgbq1pzgnw)" points="23,34,104,34,111,62.6309,129,62.6309,129,134,23,134,23,34" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="23" x2="111" y1="62.6309" y2="62.6309"/><text fill="#000000" font-family="Segoe UI" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="31" y="51.8701">Service Layer</text><!--cluster Repositories--><polygon fill="#FFFFFF" filter="url(#f112pgbq1pzgnw)" points="240,24,318,24,325,52.6309,404,52.6309,404,144,240,144,240,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="240" x2="325" y1="52.6309" y2="52.6309"/><text fill="#000000" font-family="Segoe UI" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="248" y="41.8701">Repositories</text><!--cluster DomainModel--><polygon fill="#FFFFFF" filter="url(#f112pgbq1pzgnw)" points="22,200,114,200,121,228.6309,229,228.6309,229,320,22,320,22,200" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="121" y1="228.6309" y2="228.6309"/><text fill="#000000" font-family="Segoe UI" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="30" y="217.8701">Domain Model</text><!--entity service_allocate--><rect fill="#B5E2FA" filter="url(#f112pgbq1pzgnw)" height="42.6309" style="stroke: #0FA3B1; stroke-width: 1.5;" width="74" x="39" y="75"/><text fill="#000000" font-family="Segoe UI" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="53" y="100.8701">allocate()</text><!--class ProductRepository--><rect fill="#B5E2FA" filter="url(#f112pgbq1pzgnw)" height="63.2617" id="ProductRepository" style="stroke: #0FA3B1; stroke-width: 1.5;" width="131" x="256.5" y="65"/><ellipse cx="269.5" cy="81.3154" fill="#EDDEA4" rx="9" ry="9" style="stroke: #0FA3B1; stroke-width: 1.0;"/><path d="M270.8125,85.0811 Q270.4375,85.2842 270.0156,85.3779 Q269.6094,85.4717 269.1406,85.4717 Q267.5313,85.4717 266.6719,84.4092 Q265.8125,83.3311 265.8125,81.3154 Q265.8125,79.2842 266.6719,78.2217 Q267.5313,77.1436 269.1406,77.1436 Q269.6094,77.1436 270.0156,77.2529 Q270.4375,77.3467 270.8125,77.5342 L270.8125,79.2998 Q270.3906,78.9248 270,78.7529 Q269.625,78.5811 269.2188,78.5811 Q268.3594,78.5811 267.9063,79.2686 Q267.4688,79.9561 267.4688,81.3154 Q267.4688,82.6748 267.9063,83.3623 Q268.3594,84.0498 269.2188,84.0498 Q269.625,84.0498 270,83.8779 Q270.3906,83.7061 270.8125,83.3154 L270.8125,85.0811 Z "/><text fill="#000000" font-family="Segoe UI" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="285.5" y="85.8701">ProductRepository</text><line style="stroke: #0FA3B1; stroke-width: 1.5;" x1="257.5" x2="386.5" y1="97.6309" y2="97.6309"/><text fill="#000000" font-family="Segoe UI" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="23" x="266.5" y="117.501">get()</text><!--class Product--><rect fill="#B5E2FA" filter="url(#f112pgbq1pzgnw)" height="63.2617" id="Product" style="stroke: #0FA3B1; stroke-width: 1.5;" width="76" x="38" y="241"/><ellipse cx="51" cy="257.3154" fill="#EDDEA4" rx="9" ry="9" style="stroke: #0FA3B1; stroke-width: 1.0;"/><path d="M52.3125,261.0811 Q51.9375,261.2842 51.5156,261.3779 Q51.1094,261.4717 50.6406,261.4717 Q49.0313,261.4717 48.1719,260.4092 Q47.3125,259.3311 47.3125,257.3154 Q47.3125,255.2842 48.1719,254.2217 Q49.0313,253.1436 50.6406,253.1436 Q51.1094,253.1436 51.5156,253.2529 Q51.9375,253.3467 52.3125,253.5342 L52.3125,255.2998 Q51.8906,254.9248 51.5,254.7529 Q51.125,254.5811 50.7188,254.5811 Q49.8594,254.5811 49.4063,255.2686 Q48.9688,255.9561 48.9688,257.3154 Q48.9688,258.6748 49.4063,259.3623 Q49.8594,260.0498 50.7188,260.0498 Q51.125,260.0498 51.5,259.8779 Q51.8906,259.7061 52.3125,259.3154 L52.3125,261.0811 Z "/><text fill="#000000" font-family="Segoe UI" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="67" y="261.8701">Product</text><line style="stroke: #0FA3B1; stroke-width: 1.5;" x1="39" x2="113" y1="273.6309" y2="273.6309"/><text fill="#000000" font-family="Segoe UI" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="48" y="293.501">allocate()</text><!--class Batch--><rect fill="#B5E2FA" filter="url(#f112pgbq1pzgnw)" height="32.6309" id="Batch" style="stroke: #0FA3B1; stroke-width: 1.5;" width="64" x="149" y="256"/><ellipse cx="162" cy="272.3154" fill="#EDDEA4" rx="9" ry="9" style="stroke: #0FA3B1; stroke-width: 1.0;"/><path d="M163.3125,276.0811 Q162.9375,276.2842 162.5156,276.3779 Q162.1094,276.4717 161.6406,276.4717 Q160.0313,276.4717 159.1719,275.4092 Q158.3125,274.3311 158.3125,272.3154 Q158.3125,270.2842 159.1719,269.2217 Q160.0313,268.1436 161.6406,268.1436 Q162.1094,268.1436 162.5156,268.2529 Q162.9375,268.3467 163.3125,268.5342 L163.3125,270.2998 Q162.8906,269.9248 162.5,269.7529 Q162.125,269.5811 161.7188,269.5811 Q160.8594,269.5811 160.4063,270.2686 Q159.9688,270.9561 159.9688,272.3154 Q159.9688,273.6748 160.4063,274.3623 Q160.8594,275.0498 161.7188,275.0498 Q162.125,275.0498 162.5,274.8779 Q162.8906,274.7061 163.3125,274.3154 L163.3125,276.0811 Z "/><text fill="#000000" font-family="Segoe UI" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="178" y="276.8701">Batch</text><!--link Product to Batch--><!--link service_allocate to ProductRepository--><path d="M113.1,96.5 C149.54,96.5 206.09,96.5 251.16,96.5 " fill="none" id="service_allocate-ProductRepository" style="stroke: #0FA3B1; stroke-width: 1.0;"/><polygon fill="#0FA3B1" points="256.32,96.5,247.32,92.5,251.32,96.5,247.32,100.5,256.32,96.5" style="stroke: #0FA3B1; stroke-width: 1.0;"/><text fill="#000000" font-family="Segoe UI" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="135.25" y="71.3701">get me the product</text><text fill="#000000" font-family="Segoe UI" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="154.75" y="86.001">for this SKU</text><!--link service_allocate to Product--><path d="M76,118.14 C76,147.14 76,200.36 76,235.84 " fill="none" id="service_allocate-Product" style="stroke: #0FA3B1; stroke-width: 1.0;"/><polygon fill="#0FA3B1" points="76,240.95,80,231.95,76,235.95,72,231.95,76,240.95" style="stroke: #0FA3B1; stroke-width: 1.0;"/><text fill="#000000" font-family="Segoe UI" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="81" y="176.8701">product.allocate(orderline)</text><!--
@startuml ../images/after_aggregate
skinparam default {
    FontName "Segoe UI"
    FontSize 11
    FontColor Black
}

skinparam class {
    BackgroundColor #b5e2fa
    BorderColor #0fa3b1
}

skinparam rectangle {
    BackgroundColor #b5e2fa
    BorderColor #0fa3b1
}

skinparam CircledCharacter {
    FontColor Black
}

skinparam stereotypeC {
    BackgroundColor #eddea4 
}

skinparam package {
    FontName "Segoe UI"
}

skinparam sequencelifeline {
    BorderColor #0fa3b1
}
skinparam arrow {
    Color #0fa3b1
}
skinparam participant {
    BackgroundColor #b5e2fa
    BorderColor #0fa3b1
}
skinparam entity {
    BackgroundColor #b5e2fa
    BorderColor #0fa3b1
}
skinparam collections {
    BackgroundColor #b5e2fa
    BorderColor #0fa3b1
}
skinparam database {
    BackgroundColor #b5e2fa
    BorderColor #0fa3b1
}
skinparam boundary {
    BackgroundColor #b5e2fa
    BorderColor #0fa3b1
}
skinparam actor {
    Color DeepSkyBlue
    BackgroundColor #b5e2fa
    BorderColor #0fa3b1
}
skinparam sequencegroupheader {
    FontName "Segoe UI"
}
skinparam sequencebox {
    BackgroundColor PowderBlue
    BorderColor #0fa3b1
}
skinparam padding 4

hide members
allowmixing

package "Service Layer" as ServiceLayer {
    rectangle "allocate()" as service_allocate
}

show members
hide class fields

package Repositories {
    class ProductRepository {
        get()
    }
}

package "Domain Model" as DomainModel {
    class Product {
        allocate()
    }

    class Batch
    
    Product -[hidden]> Batch
}

hide Batch members

service_allocate -> ProductRepository: "get me the product\nfor this SKU"
service_allocate - -> Product: product.allocate(orderline)

@enduml

PlantUML version 1.2018.13(Tue Nov 27 02:11:51 KST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 15.0.1+9-18
Operating System: Linux
OS Version: 5.4.0-1036-azure
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>